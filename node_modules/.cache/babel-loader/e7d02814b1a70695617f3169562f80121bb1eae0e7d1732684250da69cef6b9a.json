{"ast":null,"code":"var _jsxFileName = \"/Users/decagon/Desktop/insurance-landing-page/src/components/context/authcontext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { apiPost } from '../utils/axios';\nimport React, { createContext } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DataContext = /*#__PURE__*/createContext();\nconst DataProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const register = async formdata => {\n    try {\n      const registerData = {\n        name: formdata.name,\n        email: formdata.email,\n        phone: formdata.phone,\n        password: formdata.password\n      };\n      await apiPost('/api/user/create', registerData).then(res => {\n        toast.success(res.data.Message);\n        // localStorage.setItem(\"signature\", res.data.signature)\n      });\n\n      navigate('/login');\n    } catch (err) {\n      console.log(err);\n      toast.error(err.response.data.Error);\n    }\n  };\n  const login = async formdata => {\n    try {\n      const loginData = {\n        email: formdata.email,\n        password: formdata.password\n      };\n      await apiPost('/api/user/login', loginData).then(res => {\n        console.log(res.data);\n        toast.success(res.data.Message);\n        localStorage.setItem(\"signature\", res.data.signature);\n        localStorage.setItem(\"user\", res.data.user);\n      });\n      navigate('/');\n    } catch (err) {\n      console.log(err);\n      toast.error(err.response.data.Error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: {\n      register,\n      login\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(DataProvider, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = DataProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = React.useContext(DataContext);\n  if (context === undefined) {\n    throw new Error(\"UseAuth must be used within the auth provider\");\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default DataProvider;\nvar _c;\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"names":["apiPost","React","createContext","useNavigate","toast","DataContext","DataProvider","children","navigate","register","formdata","registerData","name","email","phone","password","then","res","success","data","Message","err","console","log","error","response","Error","login","loginData","localStorage","setItem","signature","user","useAuth","context","useContext","undefined"],"sources":["/Users/decagon/Desktop/insurance-landing-page/src/components/context/authcontext.js"],"sourcesContent":["import { apiPost } from '../utils/axios';\nimport React, { createContext } from 'react';\nimport { useNavigate } from \"react-router-dom\"\nimport { toast } from 'react-toastify';\n\nexport const DataContext = createContext();\n\nconst DataProvider = ({ children }) => {\n    const navigate = useNavigate()\n  const register = async (formdata) => {\n    try {\n      const registerData = {\n        name: formdata.name,\n        email: formdata.email,\n        phone: formdata.phone,\n        password: formdata.password,\n      };\n      await apiPost('/api/user/create', registerData).then((res) => {\n        toast.success(res.data.Message);\n        // localStorage.setItem(\"signature\", res.data.signature)\n    });\n    navigate('/login')\n    } catch (err) {\n      console.log(err);\n      toast.error(err.response.data.Error);\n    }\n  };\n\n  const login = async(formdata) => {\n    try{\n        const loginData = {\n            email: formdata.email,\n            password: formdata.password,\n        }\n        await apiPost('/api/user/login', loginData).then((res) => {\n            console.log(res.data)\n            toast.success(res.data.Message);\n            localStorage.setItem(\"signature\", res.data.signature)\n            localStorage.setItem(\"user\", res.data.user)\n          });\n          navigate('/')\n    } catch (err) {\n        console.log(err);\n        toast.error(err.response.data.Error);\n      }\n  }\n\n  return (\n    <DataContext.Provider value={{ register, login }}>{children}</DataContext.Provider>\n  );\n};\n\nexport const useAuth = () =>{\n    const context = React.useContext(DataContext)\n    if(context === undefined) {\n        throw new Error(\"UseAuth must be used within the auth provider\")\n    }\n    return context\n}\n\nexport default DataProvider"],"mappings":";;;AAAA,SAASA,OAAO,QAAQ,gBAAgB;AACxC,OAAOC,KAAK,IAAIC,aAAa,QAAQ,OAAO;AAC5C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,gBAAgB;AAAC;AAEvC,OAAO,MAAMC,WAAW,gBAAGH,aAAa,EAAE;AAE1C,MAAMI,YAAY,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EAC9B,MAAMC,QAAQ,GAAGL,WAAW,EAAE;EAChC,MAAMM,QAAQ,GAAG,MAAOC,QAAQ,IAAK;IACnC,IAAI;MACF,MAAMC,YAAY,GAAG;QACnBC,IAAI,EAAEF,QAAQ,CAACE,IAAI;QACnBC,KAAK,EAAEH,QAAQ,CAACG,KAAK;QACrBC,KAAK,EAAEJ,QAAQ,CAACI,KAAK;QACrBC,QAAQ,EAAEL,QAAQ,CAACK;MACrB,CAAC;MACD,MAAMf,OAAO,CAAC,kBAAkB,EAAEW,YAAY,CAAC,CAACK,IAAI,CAAEC,GAAG,IAAK;QAC5Db,KAAK,CAACc,OAAO,CAACD,GAAG,CAACE,IAAI,CAACC,OAAO,CAAC;QAC/B;MACJ,CAAC,CAAC;;MACFZ,QAAQ,CAAC,QAAQ,CAAC;IAClB,CAAC,CAAC,OAAOa,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBjB,KAAK,CAACoB,KAAK,CAACH,GAAG,CAACI,QAAQ,CAACN,IAAI,CAACO,KAAK,CAAC;IACtC;EACF,CAAC;EAED,MAAMC,KAAK,GAAG,MAAMjB,QAAQ,IAAK;IAC/B,IAAG;MACC,MAAMkB,SAAS,GAAG;QACdf,KAAK,EAAEH,QAAQ,CAACG,KAAK;QACrBE,QAAQ,EAAEL,QAAQ,CAACK;MACvB,CAAC;MACD,MAAMf,OAAO,CAAC,iBAAiB,EAAE4B,SAAS,CAAC,CAACZ,IAAI,CAAEC,GAAG,IAAK;QACtDK,OAAO,CAACC,GAAG,CAACN,GAAG,CAACE,IAAI,CAAC;QACrBf,KAAK,CAACc,OAAO,CAACD,GAAG,CAACE,IAAI,CAACC,OAAO,CAAC;QAC/BS,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEb,GAAG,CAACE,IAAI,CAACY,SAAS,CAAC;QACrDF,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEb,GAAG,CAACE,IAAI,CAACa,IAAI,CAAC;MAC7C,CAAC,CAAC;MACFxB,QAAQ,CAAC,GAAG,CAAC;IACnB,CAAC,CAAC,OAAOa,GAAG,EAAE;MACVC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBjB,KAAK,CAACoB,KAAK,CAACH,GAAG,CAACI,QAAQ,CAACN,IAAI,CAACO,KAAK,CAAC;IACtC;EACJ,CAAC;EAED,oBACE,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAE;MAAEjB,QAAQ;MAAEkB;IAAM,CAAE;IAAA,UAAEpB;EAAQ;IAAA;IAAA;IAAA;EAAA,QAAwB;AAEvF,CAAC;AAAC,GA3CID,YAAY;EAAA,QACGH,WAAW;AAAA;AAAA,KAD1BG,YAAY;AA6ClB,OAAO,MAAM2B,OAAO,GAAG,MAAK;EAAA;EACxB,MAAMC,OAAO,GAAGjC,KAAK,CAACkC,UAAU,CAAC9B,WAAW,CAAC;EAC7C,IAAG6B,OAAO,KAAKE,SAAS,EAAE;IACtB,MAAM,IAAIV,KAAK,CAAC,+CAA+C,CAAC;EACpE;EACA,OAAOQ,OAAO;AAClB,CAAC;AAAA,IANYD,OAAO;AAQpB,eAAe3B,YAAY;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}